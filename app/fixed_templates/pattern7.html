<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>売上データ管理システム</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100">
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside class="w-64 bg-white p-4 shadow">
        <nav class="space-y-2">
          <button
            class="w-full flex items-center justify-start py-2 text-left hover:bg-gray-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="mr-2 h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path d="M5 13l4 4L19 7" />
            </svg>
            売上管理表
          </button>
          <button
            class="w-full flex items-center justify-start py-2 text-left hover:bg-gray-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="mr-2 h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path d="M5 13l4 4L19 7" />
            </svg>
            売上分析
          </button>
          <button
            class="w-full flex items-center justify-start py-2 text-left hover:bg-gray-200"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="mr-2 h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path d="M5 13l4 4L19 7" />
            </svg>
            顧客データ分析
          </button>
        </nav>
      </aside>

      <!-- Main content -->
      <main class="flex-1 p-6 overflow-auto">
        <div class="flex justify-between items-center mb-6">
          <h1 class="text-2xl font-bold">売上データ管理システム</h1>
          <div class="flex items-center space-x-4">
            <select class="px-3 py-2 border rounded-md">
              <option value="daily">日次</option>
              <option value="weekly">週次</option>
              <option value="monthly">月次</option>
            </select>
            <button class="px-4 py-2 bg-blue-500 text-white rounded">
              期間選択
            </button>
            <button class="px-4 py-2 border rounded">エクスポート</button>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-3 gap-4 mb-6">
          <div class="p-4 bg-white shadow rounded">
            <div class="flex justify-between">
              <div>総売上高</div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <div class="text-2xl font-bold">¥2,500,000</div>
            <p class="text-xs text-gray-500">前期比 +20.1%</p>
          </div>
          <div class="p-4 bg-white shadow rounded">
            <div class="flex justify-between">
              <div>平均成約率</div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <div class="text-2xl font-bold">45.3%</div>
            <p class="text-xs text-gray-500">前期比 +2.4%</p>
          </div>
          <div class="p-4 bg-white shadow rounded">
            <div class="flex justify-between">
              <div>平均客単価</div>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <div class="text-2xl font-bold">¥50,000</div>
            <p class="text-xs text-gray-500">前期比 -0.1%</p>
          </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="flex space-x-4 border-b mb-6">
          <button
            id="tabSalesTable"
            class="pb-2 border-b-2 border-blue-500 text-blue-500"
          >
            売上管理表
          </button>
          <button id="tabSalesAnalysis" class="pb-2">売上分析</button>
          <button id="tabCustomerAnalysis" class="pb-2">顧客データ分析</button>
        </div>

        <!-- Sales Table -->
        <div id="contentSalesTable">
          <div class="mb-4">
            <button
              id="addSalesButton"
              class="px-4 py-2 bg-green-500 text-white rounded"
            >
              新規エントリー追加
            </button>
          </div>
          <table class="min-w-full bg-white">
            <thead>
              <tr>
                <th class="px-4 py-2">日付</th>
                <th class="px-4 py-2">営業担当者</th>
                <th class="px-4 py-2">集客数</th>
                <th class="px-4 py-2">成約数</th>
                <th class="px-4 py-2">成約率</th>
                <th class="px-4 py-2">売上高</th>
                <th class="px-4 py-2">客単価</th>
              </tr>
            </thead>
            <tbody id="salesList"></tbody>
          </table>
        </div>

        <!-- New Sales Entry Dialog -->
        <div
          id="newSalesEntryDialog"
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
        >
          <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
            <h2 class="text-xl font-bold mb-4">売上データ追加</h2>
            <p class="mb-4 text-gray-600">
              新しい売上データを入力してください。
            </p>
            <form id="newSalesEntryForm">
              <div class="mb-4">
                <label
                  for="date"
                  class="block text-sm font-medium text-gray-700"
                  >日付</label
                >
                <input
                  type="date"
                  id="date"
                  name="date"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
                />
              </div>
              <div class="mb-4">
                <label
                  for="salesperson"
                  class="block text-sm font-medium text-gray-700"
                  >営業担当者</label
                >
                <input
                  type="text"
                  id="salesperson"
                  name="salesperson"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
                />
              </div>
              <div class="mb-4">
                <label
                  for="customers"
                  class="block text-sm font-medium text-gray-700"
                  >集客数</label
                >
                <input
                  type="number"
                  id="customers"
                  name="customers"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
                />
              </div>
              <div class="mb-4">
                <label
                  for="conversions"
                  class="block text-sm font-medium text-gray-700"
                  >成約数</label
                >
                <input
                  type="number"
                  id="conversions"
                  name="conversions"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
                />
              </div>
              <div class="mb-4">
                <label
                  for="revenue"
                  class="block text-sm font-medium text-gray-700"
                  >売上高</label
                >
                <input
                  type="number"
                  id="revenue"
                  name="revenue"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
                />
              </div>
              <div class="flex justify-end">
                <button
                  type="button"
                  id="cancelNewSalesEntry"
                  class="mr-2 px-4 py-2 border rounded-md text-gray-600 hover:bg-gray-100"
                >
                  キャンセル
                </button>
                <button
                  type="submit"
                  class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
                >
                  追加
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Sales Analysis (hidden by default) -->
        <div id="contentSalesAnalysis" class="hidden">
          <div class="grid grid-cols-2 gap-4">
            <div class="p-4 bg-white shadow rounded">
              <h3 class="text-lg font-semibold mb-4">日次売上推移</h3>
              <div class="h-64 bg-gray-200 rounded"></div>
            </div>
            <div class="p-4 bg-white shadow rounded">
              <h3 class="text-lg font-semibold mb-4">成約率推移</h3>
              <div class="h-64 bg-gray-200 rounded"></div>
            </div>
            <div class="p-4 bg-white shadow rounded">
              <h3 class="text-lg font-semibold mb-4">営業担当者別売上比率</h3>
              <div class="h-64 bg-gray-200 rounded"></div>
            </div>
          </div>
        </div>

        <!-- Customer Analysis (hidden by default) -->
        <div id="contentCustomerAnalysis" class="hidden">
          <div class="p-4 bg-white shadow rounded">
            <h3 class="text-lg font-semibold mb-4">顧客フィードバック</h3>
            <table class="min-w-full bg-white">
              <thead>
                <tr>
                  <th class="px-4 py-2">日付</th>
                  <th class="px-4 py-2">顧客名</th>
                  <th class="px-4 py-2">フィードバック</th>
                  <th class="px-4 py-2">評価</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border px-4 py-2">2024-03-05</td>
                  <td class="border px-4 py-2">山田太郎</td>
                  <td class="border px-4 py-2">
                    商品の品質が素晴らしい。ただ、配送がやや遅い。
                  </td>
                  <td class="border px-4 py-2">4/5</td>
                </tr>
                <tr>
                  <td class="border px-4 py-2">2024-03-04</td>
                  <td class="border px-4 py-2">佐藤花子</td>
                  <td class="border px-4 py-2">
                    カスタマーサポートの対応が丁寧で満足。
                  </td>
                  <td class="border px-4 py-2">5/5</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>

    <script>
      const salesData = [
        {
          id: 1,
          date: "2024-03-01",
          salesperson: "山田太郎",
          customers: 50,
          conversions: 10,
          revenue: 500000,
        },
        {
          id: 2,
          date: "2024-03-02",
          salesperson: "佐藤花子",
          customers: 45,
          conversions: 8,
          revenue: 400000,
        },
        {
          id: 3,
          date: "2024-03-03",
          salesperson: "鈴木一郎",
          customers: 55,
          conversions: 12,
          revenue: 600000,
        },
        {
          id: 4,
          date: "2024-03-04",
          salesperson: "田中美咲",
          customers: 40,
          conversions: 7,
          revenue: 350000,
        },
        {
          id: 5,
          date: "2024-03-05",
          salesperson: "高橋健太",
          customers: 60,
          conversions: 15,
          revenue: 750000,
        },
      ];

      const salesList = document.getElementById("salesList");
      const tabSalesTable = document.getElementById("tabSalesTable");
      const tabSalesAnalysis = document.getElementById("tabSalesAnalysis");
      const tabCustomerAnalysis = document.getElementById(
        "tabCustomerAnalysis"
      );
      const contentSalesTable = document.getElementById("contentSalesTable");
      const contentSalesAnalysis = document.getElementById(
        "contentSalesAnalysis"
      );
      const contentCustomerAnalysis = document.getElementById(
        "contentCustomerAnalysis"
      );
      const addSalesButton = document.getElementById("addSalesButton");
      const newSalesEntryDialog = document.getElementById(
        "newSalesEntryDialog"
      );
      const newSalesEntryForm = document.getElementById("newSalesEntryForm");
      const cancelNewSalesEntry = document.getElementById(
        "cancelNewSalesEntry"
      );

      function renderSalesData() {
        salesList.innerHTML = salesData
          .map(
            (entry) => `
        <tr>
          <td class="border px-4 py-2">${entry.date}</td>
          <td class="border px-4 py-2">${entry.salesperson}</td>
          <td class="border px-4 py-2">${entry.customers}</td>
          <td class="border px-4 py-2">${entry.conversions}</td>
          <td class="border px-4 py-2">${(
            (entry.conversions / entry.customers) *
            100
          ).toFixed(2)}%</td>
          <td class="border px-4 py-2">${entry.revenue.toLocaleString()}円</td>
          <td class="border px-4 py-2">${(
            entry.revenue / entry.conversions
          ).toLocaleString()}円</td>
        </tr>
      `
          )
          .join("");
      }

      tabSalesTable.addEventListener("click", () => {
        contentSalesTable.classList.remove("hidden");
        contentSalesAnalysis.classList.add("hidden");
        contentCustomerAnalysis.classList.add("hidden");
      });

      tabSalesAnalysis.addEventListener("click", () => {
        contentSalesTable.classList.add("hidden");
        contentSalesAnalysis.classList.remove("hidden");
        contentCustomerAnalysis.classList.add("hidden");
      });

      tabCustomerAnalysis.addEventListener("click", () => {
        contentSalesTable.classList.add("hidden");
        contentSalesAnalysis.classList.add("hidden");
        contentCustomerAnalysis.classList.remove("hidden");
      });

      addSalesButton.addEventListener("click", () => {
        newSalesEntryDialog.classList.remove("hidden");
      });

      cancelNewSalesEntry.addEventListener("click", () => {
        newSalesEntryDialog.classList.add("hidden");
      });

      newSalesEntryForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = new FormData(newSalesEntryForm);
        const newEntry = {
          id: salesData.length + 1,
          date: formData.get("date"),
          salesperson: formData.get("salesperson"),
          customers: parseInt(formData.get("customers")),
          conversions: parseInt(formData.get("conversions")),
          revenue: parseInt(formData.get("revenue")),
        };
        salesData.push(newEntry);
        renderSalesData();
        newSalesEntryDialog.classList.add("hidden");
        newSalesEntryForm.reset();
      });

      renderSalesData();
    </script>
  </body>
</html>
